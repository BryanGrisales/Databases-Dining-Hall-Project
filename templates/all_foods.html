<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>All Foods</title>
    <style>
        table { width: 100%; border-collapse: collapse; }
        th, td { padding: 8px; text-align: left; border-bottom: 1px solid #ddd; }
        th { cursor: pointer; }
    </style>
</head>
<body>
    <h1>All Foods</h1>
    <table id="foodsTable">
        <thead>
            <tr>
                <th onclick="sortTable(0)">Name</th>
                <th onclick="sortTable(1)">Protein (g)</th>
                <th onclick="sortTable(2)">Carbs (g)</th>
                <th onclick="sortTable(3)">Fat (g)</th>
                <th onclick="sortTable(4)">Sugar (g)</th>
                <th onclick="sortTable(5)">Calories</th>
                <th onclick="sortTable(6)">Serving Size</th>
                <th onclick="sortTable(7)">Category</th>
            </tr>
        </thead>
        <tbody>
            {% for food in foods %}
            <tr>
                <td>{{ food.name }}</td>
                <td>{{ food.protein }}</td>
                <td>{{ food.carbs }}</td>
                <td>{{ food.fat }}</td>
                <td>{{ food.sugar }}</td>
                <td>{{ food.calories }}</td>
                <td>{{ food.serving_size }}</td>
                <td>{{ food.category }}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>

    <script>
        // Function to sort table columns
        function sortTable(columnIndex) {
            var table = document.getElementById("foodsTable");
            var rows = Array.from(table.rows).slice(1);
            var isAsc = table.getAttribute("data-sort-dir") === "asc";

            rows.sort(function(rowA, rowB) {
                var cellA = rowA.cells[columnIndex].innerText;
                var cellB = rowB.cells[columnIndex].innerText;

                if (!isNaN(cellA) && !isNaN(cellB)) {
                    cellA = parseFloat(cellA);
                    cellB = parseFloat(cellB);
                }
                
                return isAsc ? cellA.localeCompare(cellB) : cellB.localeCompare(cellA);
            });

            // Toggle the sorting direction
            table.setAttribute("data-sort-dir", isAsc ? "desc" : "asc");

            // Append sorted rows
            for (var i = 0; i < rows.length; i++) {
                table.appendChild(rows[i]);
            }
        }
    </script>

    <p><a href="/">Back to Dining Halls</a></p>
</body>
</html>
